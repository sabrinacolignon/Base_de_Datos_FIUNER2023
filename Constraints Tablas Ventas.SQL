-- Generada para Postgress 14 el 24/04/22 para el curso DB de la TUPED - FINUER
--
  
ALTER TABLE CLIENTES
 ADD CONSTRAINT CLI_PK PRIMARY KEY 
  (ID_CLIENTE)
;

ALTER TABLE RENGLONES_PDO
 ADD CONSTRAINT RPDO_PK PRIMARY KEY 
  (ID_PEDIDO
  ,ID_RENGLON)
;

ALTER TABLE PEDIDOS
 ADD CONSTRAINT PDO_PK PRIMARY KEY 
  (ID_PEDIDO)
;

ALTER TABLE PROVINCIAS
 ADD CONSTRAINT PROV_PK PRIMARY KEY 
  (ID_PROV)
;

ALTER TABLE ZONAS
 ADD CONSTRAINT ZONA_PK PRIMARY KEY 
  (ID_ZONA)
;

ALTER TABLE HISTORIA_VTAS
 ADD CONSTRAINT H_VTAS_PK PRIMARY KEY 
  (ID_VEND
  ,FECHA_COPIA)
;

ALTER TABLE STOCK_LOCAL
 ADD CONSTRAINT STK_LOC_PK PRIMARY KEY 
  (ID_PRODUCTO
  ,ID_OFICINA)
;

ALTER TABLE PROVEEDORES
 ADD CONSTRAINT PROVE_PK PRIMARY KEY 
  (ID_PROVEEDOR)
;

ALTER TABLE PRODUCTOS
 ADD CONSTRAINT PROD_PK PRIMARY KEY 
  (ID_PRODUCTO)
;

ALTER TABLE OFICINAS_VTAS
 ADD CONSTRAINT OFIC_VTA_PK PRIMARY KEY 
  (ID_OFICINA)
;

ALTER TABLE VENDEDORES
 ADD CONSTRAINT VEND_PK PRIMARY KEY 
  (ID_VEND)
;

ALTER TABLE LOCALIDADES
 ADD CONSTRAINT LOC_PK PRIMARY KEY 
  (COD_POST
  ,COD_POST_AUX)
;
 
ALTER TABLE CLIENTES
 ADD CONSTRAINT AVCON_CLIEN_NIVEL_000 CHECK (NIVEL_CREDITO IN ('BUENO','EXCELENTE','MALO'))
;
  
ALTER TABLE PEDIDOS
 ADD CONSTRAINT AVCON_PEDID_PEDID_000 CHECK (PEDIDO_CUMPLIDO IN ('V','F'))
;
         
ALTER TABLE CLIENTES ADD CONSTRAINT
 CLI_LOC_FK FOREIGN KEY 
  (COD_POST
  ,COD_POST_AUX) REFERENCES LOCALIDADES
  (COD_POST
  ,COD_POST_AUX);
  
ALTER TABLE CLIENTES ADD CONSTRAINT
 CLI_VEND_FK FOREIGN KEY 
  (ID_VEND) REFERENCES VENDEDORES
  (ID_VEND)
;

ALTER TABLE RENGLONES_PDO ADD CONSTRAINT
 RPDO_PDO_FK FOREIGN KEY 
  (ID_PEDIDO) REFERENCES PEDIDOS
  (ID_PEDIDO);
  
ALTER TABLE RENGLONES_PDO ADD CONSTRAINT
 RPDO_PROD_FK FOREIGN KEY 
  (ID_PRODUCTO) REFERENCES PRODUCTOS
  (ID_PRODUCTO)
;

ALTER TABLE PEDIDOS ADD CONSTRAINT
 PDO_CLI_FK FOREIGN KEY 
  (ID_CLIENTE) REFERENCES CLIENTES
  (ID_CLIENTE);
 
ALTER TABLE PEDIDOS ADD CONSTRAINT
 PDO_VEND_FK FOREIGN KEY 
  (ID_VEND) REFERENCES VENDEDORES
  (ID_VEND)
;

ALTER TABLE STOCK_LOCAL ADD CONSTRAINT
 STK_LOC_PROD_FK FOREIGN KEY 
  (ID_PRODUCTO) REFERENCES PRODUCTOS
  (ID_PRODUCTO);
  
ALTER TABLE STOCK_LOCAL ADD CONSTRAINT
 STK_LOC_OFIC_VTA_FK FOREIGN KEY 
  (ID_OFICINA) REFERENCES OFICINAS_VTAS
  (ID_OFICINA)
;

ALTER TABLE PROVEEDORES ADD CONSTRAINT
 PROVE_LOC_FK FOREIGN KEY 
  (COD_POST
  ,COD_POST_AUX) REFERENCES LOCALIDADES
  (COD_POST
  ,COD_POST_AUX)
;

ALTER TABLE PRODUCTOS ADD CONSTRAINT
 PROD_PROVE_FK FOREIGN KEY 
  (ID_PROVEEDOR) REFERENCES PROVEEDORES
  (ID_PROVEEDOR)
;

ALTER TABLE OFICINAS_VTAS ADD CONSTRAINT
 OFIC_VTA_LOC_FK FOREIGN KEY 
  (COD_POST
  ,COD_POST_AUX) REFERENCES LOCALIDADES
  (COD_POST
  ,COD_POST_AUX);

ALTER TABLE OFICINAS_VTAS ADD CONSTRAINT
 OFIC_VTA_VEND_FK FOREIGN KEY 
  (ID_VEND) REFERENCES VENDEDORES
  (ID_VEND)
;

ALTER TABLE VENDEDORES ADD CONSTRAINT
 VEND_VEND_FK FOREIGN KEY 
  (ID_VEND_RESPONDE_A) REFERENCES VENDEDORES
  (ID_VEND);
  
ALTER TABLE VENDEDORES ADD CONSTRAINT
 VEND_OFIC_VTA_FK FOREIGN KEY 
  (ID_OFICINA) REFERENCES OFICINAS_VTAS
  (ID_OFICINA);
  
ALTER TABLE VENDEDORES ADD CONSTRAINT
 VEND_LOC_FK FOREIGN KEY 
  (COD_POST
  ,COD_POST_AUX) REFERENCES LOCALIDADES
  (COD_POST
  ,COD_POST_AUX)
;

ALTER TABLE LOCALIDADES ADD CONSTRAINT
 LOC_PROV_FK FOREIGN KEY 
  (ID_PROV) REFERENCES PROVINCIAS
  (ID_PROV)
;

